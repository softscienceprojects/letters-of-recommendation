{% extends "container.html" %}

{% block content %}

    <p>Likes: {{ post.number_of_likes() }}</p>
    
    {% if not current_user.is_anonymous %}
    {% if not post.author == current_user %}
        {% if current_user.get_liked_posts(post) %}
            <a href="{{ url_for('main.unlike', post_id=post.id) }}">Unlike</a>
        {% else %}
            <a href="{{ url_for('main.like', post_id=post.id) }}">Like</a>
        {% endif %}
    {% endif %}
    {% endif %}
    
    <h1>{{ post.title }}</h1>
    <h2>by <a href="{{ url_for('main.user', username=post.author.username) }}">{{ post.author.username }}</a> 
    {% if post.author == current_user %}
            <a href="{{ url_for('main.post_edit', post_id=post.id) }}">Edit this post</a>
    {% endif %}
    </h2>
    <p class="datetime">{{ post.datePosted | datetimeformat }}</p>
    <p>{{ post.body | safe }}</p>
    
    {% for tag in post.posttags.all() %}
        <span class="tags"><a href="{{ url_for('main.posts', tag=tag.name) }}">{{ tag.name }}</a></span>
    {% endfor %}
    {% if not current_user.is_anonymous %}
        Chat about this
    {% endif %}
    <div id="comments"></div>
    
{% endblock %}