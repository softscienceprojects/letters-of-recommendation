{% extends "container.html" %}

{% block content %}
    {% if post.heroImage_id %}
    <div class="hero-image-display">
        <img src={{ post.get_post_hero_image() }} />
    </div>
    {% endif %}
    <h1>{{ post.title }}</h1>
    <h2>by <a href="{{ url_for('main.user', username=post.author.username) }}">{{ post.author.username }}</a> 
    {% if post.author == current_user %} 
            | <span class="flag-edit">{{ post.isLive | poststatus }}</span>
            <a href="{{ url_for('main.post_edit', post_id=post.id) }}"><span class="flag-edit">Edit this post</span></a>
    {% endif %}
    </h2>
    <p><span class="datetime">{{ post.datePosted | datetimeformat }}</span> | <a href="{{ url_for('main.users', liked_post=post.id) }}"><span class="label">Likes:</span> {{ post.number_of_likes() }}</a></p>
    {% if not current_user.is_anonymous %}
    {% if not post.author == current_user %}
        {% if current_user.get_liked_posts(post) %}
            <a href="{{ url_for('main.unlike', post_id=post.id) }}">Unlike</a>
        {% else %}
            <a href="{{ url_for('main.like', post_id=post.id) }}">Like</a>
        {% endif %}
    {% endif %}
    {% endif %}
    <p>{{ post.body | safe }}</p>
    
    <span class="label">Labels:</span>
    {% for tag in post.posttags.all() %}
        <span class="tags"><a href="{{ url_for('main.posts', tag=tag.name) }}">{{ tag.name }}</a></span>
    {% endfor %}
    {% if not current_user.is_anonymous %}
        <!-- Chat about this -->
    {% endif %}
    <div id="comments"></div>
    
{% endblock %}