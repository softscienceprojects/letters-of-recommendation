{% extends "container.html" %}

{% block content %}
    {% block userpage %}
        
        {% if user == current_user %}hello {% endif %}{{user.username}}
        <p><a href="{{ url_for('main.users', followers=user.username) }}">{{ user.followers.count() }} followers</a>
        <a href="{{ url_for('main.users', following=user.username) }}">{{ user.followed.count() }} following</a></p>
        {% if user != current_user %} Send a message {% endif %}
        {% if user == current_user %}
            {% if user.isWriter == True %}
                <a href="{{ url_for('main.post_new') }}">Write a post</a> | 
                <a href="{{ url_for('main.posts', user_id=user.id) }}">See your written posts</a>
            {% endif %}
            <p><a href="{{ url_for('main.edit_user', username=current_user.username) }}">Edit your profile</a></p>
            <p>Change your password</p>
            <p><button id="image-upload" class="button-base">Upload Image</button></p>
            {% if user.profile %}
                <p>{{ user.profile }}</p>
            {% else %}
                <p><em>No biography provided</em></p>
            {% endif %}
            <a href="{{ url_for('main.posts', liked=user.username) }}">Posts liked by {{user.username}}</a>
            <hr />
            {% if feed %}
                {% for post in feed %}
                    <p><a href="{{ url_for('main.post', post_id=post.id) }}">{{ post.title }}</a></p>
                {% endfor %}
            {% else %}
                <p><em>No posts</em></p>
            {% endif %}
            
        {% elif not current_user.is_following(user) %}
            <p><a href="{{ url_for('main.follow', username=user.username) }}">follow</a></p>
        {% else %}
            <p><a href="{{ url_for('main.unfollow', username=user.username) }}">unfollow</a></p>
        {% endif %}
    {% endblock %}
{% endblock %}